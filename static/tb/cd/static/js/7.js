(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{421:function(e,t,n){},435:function(e,t,n){"use strict";n(421)},448:function(e,t,n){"use strict";n.r(t);var a=n(0),l=Object(a.gb)("data-v-579b82b3");Object(a.H)("data-v-579b82b3");var c=Object(a.m)(" 查询 "),u=Object(a.m)(" 新增布控 "),i={key:0,class:"num-content"},o=Object(a.m)("布控任务："),r=Object(a.m)("条"),b=Object(a.m)("布控总人数："),s=Object(a.m)("人"),p=Object(a.m)("布控场所："),d=Object(a.m)("个"),j=Object(a.m)("预警次数："),O=Object(a.m)("次"),f=Object(a.m)("启用（已生效）："),m=Object(a.m)("次"),g=Object(a.m)("启用（未生效）："),y=Object(a.m)("次"),w=Object(a.m)("已停用："),v=Object(a.m)("已过期："),h=Object(a.m)("启用"),k=Object(a.m)("停用"),C=Object(a.m)("详情"),T=Object(a.m)("编辑"),_=Object(a.m)("删除");Object(a.F)();var z=l(function(e,t,n,z,N,D){var x=Object(a.N)("el-option"),E=Object(a.N)("el-select"),V=Object(a.N)("el-col"),L=Object(a.N)("el-date-picker"),R=Object(a.N)("el-time-picker"),S=Object(a.N)("el-row"),I=Object(a.N)("el-input"),J=Object(a.N)("el-button"),U=Object(a.N)("el-table-column"),B=Object(a.N)("el-table"),K=Object(a.N)("el-pagination"),P=Object(a.N)("el-card"),Y=Object(a.O)("loading");return Object(a.E)(),Object(a.j)(P,{class:"index-container"},{default:l(function(){return[Object(a.n)(S,{gutter:30,type:"flex",justify:"start"},{default:l(function(){return[Object(a.n)(V,{span:4},{default:l(function(){return[Object(a.n)(E,{size:"small",filterable:"",clearable:"",modelValue:e.personType,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.personType=t}),placeholder:"请选择人员类型"},{default:l(function(){return[(Object(a.E)(!0),Object(a.j)(a.b,null,Object(a.L)(e.personTypeOptions,function(e){return Object(a.E)(),Object(a.j)(x,{key:e.id,label:e.tagName,value:e.tagName},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1}),Object(a.n)(V,{span:4},{default:l(function(){return[Object(a.n)(E,{size:"small",modelValue:e.warningLevel,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.warningLevel=t}),clearable:"",placeholder:"布控等级"},{default:l(function(){return[(Object(a.E)(!0),Object(a.j)(a.b,null,Object(a.L)(e.warningLevelOptions,function(e){return Object(a.E)(),Object(a.j)(x,{key:e.id,label:e.label,value:e.id},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1}),Object(a.n)(V,{span:4},{default:l(function(){return[Object(a.n)(E,{size:"small",modelValue:e.status,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.status=t}),clearable:"",placeholder:"布控状态"},{default:l(function(){return[(Object(a.E)(!0),Object(a.j)(a.b,null,Object(a.L)(e.statusOptions,function(e){return Object(a.E)(),Object(a.j)(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1}),Object(a.n)(V,{span:6},{default:l(function(){return[Object(a.n)(L,{size:"small",clearable:"",modelValue:e.date,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.date=t}),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"布控开始日期","end-placeholder":"布控结束日期"},null,8,["modelValue"])]}),_:1}),Object(a.n)(V,{span:6},{default:l(function(){return[Object(a.n)(R,{"is-range":"",size:"small",onChange:e.dateTimeChange,clearable:"",modelValue:e.dateTime,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.dateTime=t}),"value-format":"HH:mm:ss","range-separator":"至","start-placeholder":"预警开始时间","end-placeholder":"预警结束时间",placeholder:"选择预警时间范围"},null,8,["onChange","modelValue"])]}),_:1})]}),_:1}),Object(a.n)(S,{gutter:30,type:"flex",justify:"start",style:{"margin-top":"10px"}},{default:l(function(){return[Object(a.n)(V,{span:8},{default:l(function(){return[Object(a.n)(I,{size:"small",modelValue:e.title,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.title=t}),clearable:"",onKeyup:Object(a.eb)(e.handleQuery,["enter","native"]),placeholder:"请输入布控名称/布控地点进行搜索"},null,8,["modelValue","onKeyup"])]}),_:1}),Object(a.n)(V,{span:2},{default:l(function(){return[Object(a.n)(J,{size:"small",icon:"el-icon-search",type:"primary","native-type":"submit",onClick:e.handleQuery},{default:l(function(){return[c]}),_:1},8,["onClick"])]}),_:1}),Object(a.n)(V,{span:4},{default:l(function(){return[Object(a.n)(J,{size:"small",icon:"el-icon-plus",type:"primary","native-type":"submit",onClick:e.addDeploy},{default:l(function(){return[u]}),_:1},8,["onClick"])]}),_:1})]}),_:1}),e.statistics?(Object(a.E)(),Object(a.j)("div",i,[Object(a.n)("span",null,[o,Object(a.n)("span",null,Object(a.R)(e.statistics.deployCount),1),r]),Object(a.n)("span",null,[b,Object(a.n)("span",null,Object(a.R)(e.statistics.keyPersonCount),1),s]),Object(a.n)("span",null,[p,Object(a.n)("span",null,Object(a.R)(e.statistics.placeCount),1),d]),Object(a.n)("span",null,[j,Object(a.n)("span",null,Object(a.R)(e.statistics.warningCount),1),O]),Object(a.n)("span",null,[f,Object(a.n)("span",null,Object(a.R)(e.statistics.enableCount),1),m]),Object(a.n)("span",null,[g,Object(a.n)("span",null,Object(a.R)(e.statistics.disableCount),1),y]),Object(a.n)("span",null,[w,Object(a.n)("span",null,Object(a.R)(e.statistics.suspendedCount),1)]),Object(a.n)("span",null,[v,Object(a.n)("span",null,Object(a.R)(e.statistics.expireCount),1)])])):Object(a.k)("v-if",!0),Object(a.db)(Object(a.n)(B,{border:"",size:"small",data:e.tableData,align:"center","tooltip-effect":"dark",style:{width:"100%","margin-top":"20px"}},{default:l(function(){return[Object(a.k)('            <el-table-column  prop="order" label="序号" align="center" min-width="80">'),Object(a.k)('                <template #default="scope">'),Object(a.k)("                    <span>{{scope.row.index}}</span>"),Object(a.k)("                </template>"),Object(a.k)("            </el-table-column>"),Object(a.n)(U,{prop:"deployTitle",label:"布控名称",align:"center","min-width":"150"}),Object(a.n)(U,{prop:"warningLevel",label:"等级",align:"center","min-width":"80"},{default:l(function(t){return[Object(a.n)("span",null,Object(a.R)(e.$filters.filterWarnStatus(t.row.warningLevel)),1)]}),_:1}),Object(a.n)(U,{prop:"personCount",label:"人员数",align:"center","min-width":"80"},{default:l(function(t){return[Object(a.n)(J,{type:"text",onClick:function(n){return e.checkKpCount(t.row)}},{default:l(function(){return[Object(a.m)(Object(a.R)(t.row.personCount),1)]}),_:2},1032,["onClick"])]}),_:1}),Object(a.n)(U,{prop:"date",label:"布控有效日期",align:"center","min-width":"180"},{default:l(function(e){return[Object(a.n)("span",null,Object(a.R)(e.row.deployDateStart)+" -- "+Object(a.R)(e.row.deployDateEnd),1)]}),_:1}),Object(a.n)(U,{prop:"time",label:"预警有效时间段",align:"center","min-width":"120"},{default:l(function(e){return[Object(a.n)("span",null,Object(a.R)(e.row.deployTimeStart)+" -- "+Object(a.R)(e.row.deployTimeEnd),1)]}),_:1}),Object(a.n)(U,{prop:"status",label:"布控状态",align:"center","min-width":"120"},{default:l(function(t){return[Object(a.n)("span",null,Object(a.R)(e.$filters.filterDeployStatus(t.row.status)),1)]}),_:1}),Object(a.n)(U,{prop:"address",label:"操作",align:"center","min-width":"180"},{default:l(function(t){return[4==t.row.status?(Object(a.E)(),Object(a.j)(J,{key:0,size:"small",type:"text","native-type":"submit",onClick:function(n){return e.operation(t.row,t.row.deployId,"启用",1)}},{default:l(function(){return[h]}),_:2},1032,["onClick"])):Object(a.k)("v-if",!0),1==t.row.status||2==t.row.status?(Object(a.E)(),Object(a.j)(J,{key:1,size:"small",type:"text","native-type":"submit",onClick:function(n){return e.operation(t.row,t.row.deployId,"停用",4)}},{default:l(function(){return[k]}),_:2},1032,["onClick"])):Object(a.k)("v-if",!0),Object(a.n)(J,{size:"small",type:"text","native-type":"submit",onClick:function(n){return e.checkDetail(t.row,t.row.deployId,"detail")}},{default:l(function(){return[C]}),_:2},1032,["onClick"]),1!=t.row.status?(Object(a.E)(),Object(a.j)(J,{key:2,size:"small",type:"text","native-type":"submit",style:{color:"#85ce61"},onClick:function(n){return e.checkDetail(t.row,t.row.deployId)}},{default:l(function(){return[T]}),_:2},1032,["onClick"])):Object(a.k)("v-if",!0),1!=t.row.status?(Object(a.E)(),Object(a.j)(J,{key:3,size:"small",type:"text","native-type":"submit",style:{color:"#f78989"},onClick:function(n){return e.deleteDeploy(t.row,t.row.deployId)}},{default:l(function(){return[_]}),_:2},1032,["onClick"])):Object(a.k)("v-if",!0)]}),_:1})]}),_:1},8,["data"]),[[Y,e.loading]]),Object(a.n)(K,{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10],total:e.total,"page-size":e.pageSize,"current-page":e.pageNumber,onCurrentChange:e.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]}),_:1})}),N=n(21),D=n(74),x=n(19),E=n(33),V=Object(a.o)({name:"临控管理",setup:function(){var e=Object(x.d)(),t=Object(a.J)(null),n=Object(a.J)(null),l=Object(a.J)(null),c=Object(a.J)(null),u=Object(a.J)(null),i=Object(a.J)(null),o=Object(a.I)({pageNumber:1,pageSize:10,statistics:null,warningLevel:null,total:0,title:null,status:null,date:null,dateTime:null,warningLevelOptions:[{id:1,label:"一级"},{id:2,label:"二级"},{id:3,label:"三级"}],queryForm:{title:"",personType:"",dateTime:""},personTypeOptions:[],loading:!1,tableData:[],statusOptions:[{value:1,label:"启用已生效"},{value:2,label:"启用未生效"},{value:3,label:"已过期"},{value:4,label:"已停用"}]});Object(a.B)(function(){s(),b()}),Object(a.C)(function(){r()}),Object(a.ab)(i,function(e,t,n){o.status=e,o.pageNumber=1,s()},{lazy:!0}),Object(a.ab)(t,function(e,t,n){o.title=e,""==e&&(o.pageNumber=1,s())},{lazy:!0}),Object(a.ab)(n,function(e,t,n){o.personType=e,o.pageNumber=1,s()},{lazy:!0}),Object(a.ab)(l,function(e,t,n){o.warningLevel=e,o.pageNumber=1,s()},{lazy:!0}),Object(a.ab)(c,function(e,t,n){o.date=e,o.pageNumber=1,s()},{lazy:!0}),Object(a.ab)(u,function(e,t,n){o.dateTime=e,null==o.dateTime&&(o.pageNumber=1,s())},{lazy:!0});var r=e.beforeEach(function(e,t){"/clinicalControlAdd"==t.path&&s()}),b=function(){D.a.get("/govern/tag/getTags").then(function(e){200==e.code&&(o.personTypeOptions=e.data.tags)})},s=function(){o.loading=!0;var e={pageNumber:o.pageNumber,pageSize:o.pageSize,name:o.title,tag:o.personType,status:o.status,warningDateEnd:null,warningDateStart:null,warningLevel:o.warningLevel,warningTimeEnd:null,warningTimeStart:null};o.date&&o.date.length&&(e.warningDateStart=o.date[0],e.warningDateEnd=o.date[1]),o.dateTime&&o.dateTime.length&&(e.warningTimeStart=o.dateTime[0],e.warningTimeEnd=o.dateTime[1]),D.a.post("/govern/deploy/list",e).then(function(e){o.loading=!1,200==e.code&&(o.tableData=e.data.data,o.statistics=e.data.banner,o.total=e.data.pageContent.total)})};return Object(N.a)(Object(N.a)({},Object(a.U)(o)),{},{handleQuery:function(){o.pageNumber=1,s()},getDataList:s,checkKpCount:function(t){t.personCount>0?e.push({path:"/user/kpCount",query:{id:t.deployId,type:"warn"}}):Object(E.a)({type:"info",message:"没有布控人员!"})},changePage:function(e){o.pageNumber=e,s()},title:t,getPersonType:b,personType:n,warningLevel:l,status:i,date:c,dateTime:u,deleteDeploy:function(e,t){E.b.confirm("您确定要删除"+e.deployTitle+", 是否继续?","删除布控",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){D.a.get("/govern/deploy/delete?deployId=".concat(t)).then(function(e){200==e.code&&s(),Object(E.a)({type:"success",message:"删除成功!"})})}).catch(function(){Object(E.a)({type:"info",message:"已取消删除"})})},dateTimeChange:function(){null!==o.dateTime&&(o.pageNumber=1),s()},addDeploy:function(){e.push({path:"/clinicalControlAdd"})},checkDetail:function(t,n,a){var l={id:n,txt:a||null,page:o.pageNumber};e.push({path:"/clinicalControlAdd",query:l})},operation:function(e,t,n,a){E.b.confirm("您确定要"+n+e.deployTitle+", 是否继续?",n+"布控",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:t,status:a};D.a.post("/govern/deploy/edit",e).then(function(e){200==e.code&&s(),Object(E.a)({type:"success",message:n+"成功!"})})}).catch(function(){Object(E.a)({type:"info",message:"已取消"})})},unwatch:r})}});n(435);V.render=z,V.__scopeId="data-v-579b82b3";t.default=V}}]);